<!DOCTYPE html>
<html>
<head>
    <title>WASD Retro Racer</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: sans-serif; }
        #ui { position: absolute; top: 10px; left: 10px; color: white; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; }
        canvas { display: block; image-rendering: pixelated; width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <div id="ui">
        <b>Controls:</b> W: Accelerate | S: Brake | A/D: Steer
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 320; canvas.height = 240;

        const player = { x: 500, y: 500, angle: 0, speed: 0 };
        const keys = { w: false, a: false, s: false, d: false };

        window.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
        window.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

        function drawBackground() {
            // Draw a pseudo-3D "Mode 7" floor
            const horizon = 120;
            for (let y = horizon; y < canvas.height; y++) {
                const perspective = (y - horizon) / horizon;
                const distance = 1 / perspective;
                
                // Color stripes to simulate a track
                ctx.fillStyle = (Math.floor(distance * 0.1) % 2 === 0) ? '#444' : '#222';
                ctx.fillRect(0, y, canvas.width, 1);
                
                // Red/White edges
                const edgeWidth = 50 * perspective;
                ctx.fillStyle = (Math.floor(distance * 0.5) % 2 === 0) ? 'red' : 'white';
                ctx.fillRect(canvas.width/2 - edgeWidth - 10, y, 5, 1);
                ctx.fillRect(canvas.width/2 + edgeWidth + 5, y, 5, 1);
            }
        }

        function update() {
            if (keys.w) player.speed = Math.min(player.speed + 0.1, 4);
            else if (keys.s) player.speed = Math.max(player.speed - 0.2, -1);
            else player.speed *= 0.98;

            if (Math.abs(player.speed) > 0.1) {
                if (keys.a) player.angle -= 0.05;
                if (keys.d) player.angle += 0.05;
            }
        }

        function drawPlayer() {
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height - 40);
            // Draw a simple red "kart"
            ctx.fillStyle = 'red';
            ctx.fillRect(-10, -5, 20, 10);
            ctx.fillStyle = 'black';
            ctx.fillRect(-12, -7, 5, 5); // Wheels
            ctx.fillRect(7, -7, 5, 5);
            ctx.restore();
        }

        function loop() {
            ctx.fillStyle = 'skyblue'; // Sky
            ctx.fillRect(0, 0, canvas.width, 120);
            
            update();
            drawBackground();
            drawPlayer();
            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
