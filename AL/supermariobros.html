<!DOCTYPE html>
<html>
<head>
    <title>Super Mario Mini</title>
    <style>
        body { margin: 0; background: #5c94fc; overflow: hidden; }
        canvas { display: block; border: 4px solid #000; margin: 20px auto; background: #5c94fc; }
    </style>
</head>
<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = 600;
canvas.height = 400;

// Game State
const gravity = 0.8;
const player = {
    x: 50, y: 300, w: 32, h: 32,
    vx: 0, vy: 0, speed: 5, jump: -15,
    grounded: false, color: "#ff0000"
};

const keys = {};
const platforms = [
    { x: 0, y: 360, w: 1000, h: 40, color: "#8b4513" }, // Ground
    { x: 200, y: 280, w: 100, h: 32, color: "#ffcc00" }, // Block
    { x: 350, y: 200, w: 100, h: 32, color: "#ffcc00" },
    { x: 500, y: 280, w: 100, h: 32, color: "#ffcc00" },
    { x: 700, y: 150, w: 200, h: 32, color: "#ffcc00" }
];

let cameraX = 0;

// Input Handling
window.addEventListener('keydown', e => keys[e.code] = true);
window.addEventListener('keyup', e => keys[e.code] = false);

function update() {
    // Movement
    if (keys['ArrowRight']) player.vx = player.speed;
    else if (keys['ArrowLeft']) player.vx = -player.speed;
    else player.vx = 0;

    if (keys['ArrowUp'] && player.grounded) {
        player.vy = player.jump;
        player.grounded = false;
    }

    // Physics
    player.vy += gravity;
    player.x += player.vx;
    player.y += player.vy;

    // Collision Detection
    player.grounded = false;
    platforms.forEach(p => {
        if (player.x < p.x + p.w && player.x + player.w > p.x &&
            player.y < p.y + p.h && player.y + player.h > p.y) {
            
            // Check vertical collision
            if (player.vy > 0 && player.y + player.h - player.vy <= p.y) {
                player.y = p.y - player.h;
                player.vy = 0;
                player.grounded = true;
            } 
            // Check side collision
            else if (player.vx > 0 && player.x + player.w - player.vx <= p.x) {
                player.x = p.x - player.w;
            } else if (player.vx < 0 && player.x - player.vx >= p.x + p.w) {
                player.x = p.x + p.w;
            }
        }
    });

    // Camera follow
    if (player.x > canvas.width / 2) cameraX = player.x - canvas.width / 2;
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    ctx.translate(-cameraX, 0);

    // Draw Platforms
    platforms.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.w, p.h);
        ctx.strokeStyle = "#000";
        ctx.strokeRect(p.x, p.y, p.w, p.h);
    });

    // Draw Player (Mario)
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.w, player.h);

    ctx.restore();
    requestAnimationFrame(loop);
}

function loop() {
    update();
    draw();
}

loop();
</script>
</body>
</html>
