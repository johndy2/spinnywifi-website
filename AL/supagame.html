<!DOCTYPE html>
<html>
<head>
    <title>WASD HTML5 Racer</title>
    <style>
        body { margin: 0; background: #333; display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: sans-serif; overflow: hidden; }
        canvas { background: #555; border: 4px solid #222; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .ui { position: absolute; top: 20px; left: 20px; pointer-events: none; }
    </style>
</head>
<body>
    <div class="ui">
        <h1>WASD Micro-Racer</h1>
        <p>W: Gas | S: Brake/Reverse | A/D: Steer</p>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Car Properties
        const car = {
            x: 400, y: 300,
            angle: 0,
            speed: 0,
            accel: 0.2,
            decel: 0.1,
            maxSpeed: 7,
            friction: 0.05,
            steer: 0.06,
            width: 30, height: 50,
            color: '#ff4444'
        };

        // Input Tracking
        const keys = { w: false, a: false, s: false, d: false };
        window.addEventListener('keydown', e => { if(keys.hasOwnProperty(e.key.toLowerCase())) keys[e.key.toLowerCase()] = true; });
        window.addEventListener('keyup', e => { if(keys.hasOwnProperty(e.key.toLowerCase())) keys[e.key.toLowerCase()] = false; });

        function update() {
            // Acceleration & Braking
            if (keys.w) car.speed += car.accel;
            if (keys.s) car.speed -= car.accel;

            // Friction & Speed Limits
            if (car.speed > 0) car.speed -= car.friction;
            if (car.speed < 0) car.speed += car.friction;
            if (Math.abs(car.speed) < car.friction) car.speed = 0;
            if (car.speed > car.maxSpeed) car.speed = car.maxSpeed;
            if (car.speed < -car.maxSpeed / 2) car.speed = -car.maxSpeed / 2;

            // Steering (Only steer if moving)
            const steerFactor = car.speed / car.maxSpeed;
            if (keys.a) car.angle -= car.steer * steerFactor;
            if (keys.d) car.angle += car.steer * steerFactor;

            // Movement Physics
            car.x += Math.cos(car.angle) * car.speed;
            car.y += Math.sin(car.angle) * car.speed;

            // Screen Wrap
            if (car.x > canvas.width) car.x = 0;
            if (car.x < 0) car.x = canvas.width;
            if (car.y > canvas.height) car.y = 0;
            if (car.y < 0) car.y = canvas.height;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Car with Rotation
            ctx.save();
            ctx.translate(car.x, car.y);
            ctx.rotate(car.angle);
            
            // Body
            ctx.fillStyle = car.color;
            ctx.fillRect(-car.height/2, -car.width/2, car.height, car.width);
            
            // Headlights (Front indicator)
            ctx.fillStyle = 'yellow';
            ctx.fillRect(car.height/2 - 5, -car.width/2, 5, 5);
            ctx.fillRect(car.height/2 - 5, car.width/2 - 5, 5, 5);
            
            ctx.restore();
            
            requestAnimationFrame(() => { update(); draw(); });
        }

        draw();
    </script>
</body>
</html>
